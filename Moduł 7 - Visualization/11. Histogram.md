# Histogram – rozkład wartości

## Charakterystyka

**Histogram** to wizualizacja rozkładu wartości w formie słupków (bars), gdzie każdy słupek reprezentuje przedział wartości (bucket), a wysokość słupka pokazuje częstotliwość występowania wartości w tym przedziale. Jest to idealne rozwiązanie do:

- Analizy rozkładu wartości w określonym momencie (snapshot)
- Identyfikacji czy dane są normally distributed, skewed, bimodal
- Wykrywania outliers i anomalii w rozkładzie
- Analizy latency/response time distributions
- Porównywania rozkładów między okresami lub grupami

**Kiedy używać Histogram**: Analiza frequency distribution, identyfikacja modów/median/outliers, porównanie rozkładów.

**Kiedy NIE używać**: Zmiany w czasie (użyj Heatmap), dokładne wartości (użyj Table), trend (użyj Time series).

**Różnica względem Heatmap**: Histogram = rozkład w jednym momencie (1D), Heatmap = rozkład w czasie (2D).



## Konfiguracja Histogram

### Bucket size: Auto (Grafana oblicza) lub Custom (własny rozmiar np. 0.1s, 100ms)
### Unit: Jednostka osi X (seconds, bytes, etc.)
### Color scheme: Kolory słupków

## Przykłady

### Przykład 1: Rozkład latency HTTP (last 5min)
```promql
http_request_duration_seconds{job="api"}[5m]
```
**Wynik**: Większość <200ms, outliers do 2s. Identyfikacja p95/p99.

### Przykład 2: CPU usage distribution
```promql  
node_cpu_seconds_total{mode="user"}[1h]
```
**Wynik**: Czy CPU jest normally distributed czy ma spikes.

## Best practices

**Bucket size**: 10-30 buckets (sweet spot). Za dużo (>50) = cluttered, za mało (<5) = loss of detail.

**Zakres czasu**: Last 5-15min dla current state, compare periods używając dwóch panels.

## Troubleshooting

**Pusty**: Potrzeba raw data, nie agregacji.  
**Wszystko w jednym bucket**: Zmniejsz Bucket size.  
**Za dużo buckets**: Zwiększ Bucket size.
```
2. Histogram pokaże, jak rozkładają się wartości użycia CPU w danym czasie.

### Przykład 2: Analiza opóźnień sieciowych
1. Skonfiguruj zapytanie do monitorowania opóźnień sieciowych:

```
avg(net.tcp.service.latency[,80]) by {host}
```

2. Histogram pokaże, w których przedziałach czasowych występowały opóźnienia.

## Krok 7: Zapisanie i finalizacja

1. Kliknij **Save** w prawym górnym rogu i nadaj dashboardowi nazwę, np. **Rozkład obciążenia CPU**.
2. Testuj ustawienia wizualizacji, aby uzyskać najbardziej czytelny wykres.

## Podsumowanie

Histogram to narzędzie idealne do analizy rozkładu wartości danych z Zabbixa. Poprawnie skonfigurowany wykres ułatwi identyfikację wzorców, takich jak wysokie użycie zasobów czy występowanie anomalii. Dzięki tej wizualizacji możesz lepiej zrozumieć dane systemowe i sieciowe, co pozwala na podejmowanie bardziej świadomych decyzji.
