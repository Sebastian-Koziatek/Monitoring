# Status history – historia statusów

## Charakterystyka

**Status history** to wizualizacja przedstawiająca zmiany stanów w czasie w formie dyskretnych kolorowych boxów (kwadratów). Każdy box reprezentuje snapshot stanu w konkretnym momencie, pokazując kiedy wartość została zmierzona. Jest to idealne rozwiązanie do:

- Monitorowania statusów które zmieniają się często
- Wizualizacji discrete state changes z wyraźnymi timestamps
- Analizy health checks i availability
- Śledzenia zmian configuration states
- Identyfikacji flapping (częste zmiany między stanami)
- Porównywania stabilności wielu komponentów

**Kiedy używać Status history**:
- Stany zmieniają się często i chcesz zobaczyć każdą zmianę osobno
- Potrzebujesz zobaczyć dokładne timestamps zmian stanów
- Analizujesz flapping behavior (niestabilne przełączanie stanów)
- Monitoring high-frequency state changes
- Dane są sparse (rzadkie pomiary)

**Kiedy NIE używać Status history**:
- Stany zmieniają się rzadko i chcesz zobaczyć długość trwania - użyj State timeline
- Dane są continuous numerical - użyj Time series
- Potrzebujesz zobaczyć dokładne wartości liczbowe - użyj Table

**Różnica względem State timeline**:
- **Status history** - dyskretne boxy pokazujące punkty w czasie (lepsze dla częstych zmian)
- **State timeline** - ciągłe paski pokazujące okresy trwania (lepsze dla rzadkich zmian)

## Konfiguracja

Opcje są prawie identyczne jak w State timeline. Główne z nich:

**Row height**: Wysokość wierszy (0.5-0.9)
**Col width**: Szerokość boxów (Auto lub Custom 0.3-0.9)
**Show values**: Auto/Always/Never
**Value mappings**: Mapowanie liczb na nazwy stanów (KRYTYCZNe!)
**Thresholds**: Przypisanie kolorów

Szczegóły konfiguracji znajdziesz w dokumentacji State timeline - opcje działają identycznie.

## Przykłady

### Flapping service monitoring
```promql
up{job="unstable-service"}
```
Value mappings: 0→Down, 1→Up. Każdy scrape jako osobny box - flapping widoczny jako częste zmiany kolorów.

### CI/CD deployment tracking
```promql
deployment_status{environment="production"}
```
Wartości 0-3 dla różnych stanów deployment. Historia jako timeline dyskretnych events.

### Health checks
```promql
probe_success{job="blackbox"}
```
Każdy check jako box, gaps między boxami pokazują periods między checks.

## Status history vs State timeline

**Użyj Status history gdy**: Częste zmiany, sparse data, debugging, dokładny timeline
**Użyj State timeline gdy**: Rzadkie zmiany, długie periods, uptime %, cleaner viz

## Troubleshooting

**Boxy zbyt małe**: Zwiększ Col width i Row height
**Zbyt wiele boxów**: Rozważ State timeline lub zwiększ scrape interval
**Gaps**: Normalne - pokazują okresy między pomiarami
